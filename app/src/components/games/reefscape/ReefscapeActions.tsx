import React from 'react';
import {Path, Svg} from 'react-native-svg';
import {useTheme} from '@react-navigation/native';

export enum ReefscapeActionType {
  PickupCoralSource,
  PickupAlgaeReef,
  PickupAlgaeGround,
  PickupCoralGround,
  ScoreCoralL1,
  ScoreCoralL2,
  ScoreCoralL3,
  ScoreCoralL4,
  ScoreProcessor,
  MissCoral,
}

export type ActionMetadata = {
  name: string;
  icon?: React.FC<{color: string}>;
  link_name: string;
};

export const getActionForLink = (link: string): ReefscapeActionType | null => {
  for (const action in Object.keys(ReefscapeActions)) {
    if (
      ReefscapeActions[Number(action) as ReefscapeActionType].link_name === link
    ) {
      return Number(action) as ReefscapeActionType;
    }
  }
  return null;
};

export const ReefscapeActions: Record<ReefscapeActionType, ActionMetadata> = {
  [ReefscapeActionType.PickupCoralGround]: {
    name: 'Pickup Coral Ground',
    link_name: 'pickup_coral_ground',
  },
  [ReefscapeActionType.PickupAlgaeGround]: {
    name: 'Pickup Algae Ground',
    link_name: 'pickup_algae_ground',
  },
  [ReefscapeActionType.PickupAlgaeReef]: {
    name: 'Pickup Algae Reef',
    link_name: 'pickup_algae_reef',
  },
  [ReefscapeActionType.PickupCoralSource]: {
    name: 'Pickup Coral Source',
    icon: ({color}: {color: string}) => (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        data-name="Layer 1"
        viewBox="0 0 1000 1250"
        x="0px"
        y="0px">
        <title>Coral Reef</title>
        <path
          d="M629.32,916a16,16,0,0,1-2.9-.26L525.31,897.16l-.4-.08h0a15,15,0,0,1-2-.55l-70.55-23.18a16,16,0,0,1-10.93-13.61l-8.08-80.83C421,668,344.26,655.19,329,653.75c-3.56-.34-6.51-.66-9.27-1-37.09-4.65-84-11.28-96.94-16.45-19.72-7.89-30.08-26.12-27.71-48.79,2.61-25,21.46-53.75,48.46-58.45,30.3-5.27,61.65,4.93,89.31,13.92q4.08,1.34,8,2.6a61.31,61.31,0,0,0-7-13c-25.07-34-59.39-80.53-94.74-101.87-14.71-8.88-34.64-13.64-53.8-17.76-26.46-5.69-48-24.85-56.15-50-7.76-23.87-1.43-45.9,16.93-58.92,16.16-11.46,40.83-12.11,73.3-1.92A280.08,280.08,0,0,1,280,329.89c1.84,1.16,3.38,2,4.65,2.67a88.44,88.44,0,0,0-2.88-19.14l-62.25-94.17c-3.29-5-7.42-10.4-11.8-16.15-9.74-12.78-20.79-27.27-26.34-42.33-5.83-15.8-2.76-32.19,8.63-46.14,8.16-10,20.79-18.8,35.59-24.85,20.66-8.46,51.13-11.78,79,20.4,16.8,19.42,28.11,46.07,38.09,69.59,3.18,7.49,6.23,14.66,9.11,20.71-1.5-21.32-2.33-41.42,4-59,8.51-23.76,28.52-37.46,59.48-40.72,24.24-2.55,42.82,2.58,55.23,15.27,16.8,17.18,14.37,40.52,14,43.13-.05.4-.12.79-.2,1.18l-12.81,62.56a337.93,337.93,0,0,0-6.45,85.2c1.43,27.67,2.19,55.11,2.26,81.62l25.94-64.28q1-2.49,1.87-4.73c5.19-13.26,9.67-24.71,27.66-34.61,21.21-11.67,53-7,72.42,10.67,15.21,13.85,19.5,33.18,11.46,51.69-.18.43-10.61,24.15-22,50.17l-18.13,41.22a409.13,409.13,0,0,0-18.65,51.63l-18.15,63.26c21.17,15.9,23.44,35.71,25.28,51.68,1,9.08,1.94,17,6,23.72a52.14,52.14,0,0,0,2.83-15.31c1.48-46.14,24.68-91.46,43.32-127.89,3.37-6.57,7.19-12.94,10.89-19.09,5.09-8.47,9.9-16.47,13.27-24.47,6.23-14.79,5.88-31.47,5.5-49.14-.12-5.65-.25-11.49-.16-17.42a120,120,0,0,1,5.66-38.7c9.33-28.28,29.44-45.05,56.61-47.23,20.82-1.66,33.48,7,40.43,14.52s11.09,17,13.52,26.67c6.66-8.42,13.79-16.34,21.89-22.79,12.27-9.75,29.79-12.93,46.87-8.49,16.74,4.35,30.22,15.44,36.08,29.66,11.55,28-7.8,51.93-20.61,67.73-2.88,3.55-5.6,6.91-7.74,9.94-33.6,47.48-71.13,92.77-107.44,136.58l-8.56,10.34A83.36,83.36,0,0,0,696.45,588c-1.35,5.46-1.44,8.64-1.31,10.27a24.73,24.73,0,0,0,6.08-.73,43.62,43.62,0,0,0,11.4-4.43l15-8.31a126.11,126.11,0,0,0,12.64-8c10.2-7.37,30.45-20.94,51.52-29,39.25-15,59.11-2.55,68.87,10.58,11.15,15,15.49,31.84,12.55,48.66-3.64,20.82-17.76,38.25-37.78,46.61l-49,20.48a265.23,265.23,0,0,0-62.2,36.36c-.77.6-1.52,1.2-2.27,1.8a164.22,164.22,0,0,0-57.34,94.9L645,903.2A16,16,0,0,1,629.32,916Zm-81.87-47.31,69.32,12.74,16.46-80.72a196.22,196.22,0,0,1,68.6-113.41c.83-.68,1.68-1.35,2.53-2a297.49,297.49,0,0,1,69.7-40.75l49-20.48c9.75-4.08,16.88-12.73,18.6-22.6,1.43-8.18-.77-16.05-6.72-24.06-9.4-12.66-45.32,3.14-76,25.28a156.79,156.79,0,0,1-15.89,10.09l-15,8.3a75.19,75.19,0,0,1-19.86,7.66c-19.61,4.41-30.59-1.67-36.35-7.55-8.81-9-11-22.73-6.53-40.87a115.52,115.52,0,0,1,23.25-45.64l8.57-10.35c35.92-43.34,73.07-88.16,106-134.65,2.75-3.88,5.93-7.8,9-11.6,12.2-15.05,19.9-25.64,15.88-35.4-2-4.9-7.59-9.06-14.53-10.87-7.18-1.86-14.6-.85-18.91,2.57-10.16,8.08-19.71,21.25-29,34-4.78,6.59-9.73,13.41-14.76,19.51a16,16,0,0,1-28.13-12.75c1.78-11.24,2.41-37.82-7-48-2-2.17-5.7-5-14.34-4.29C667,325.56,668.48,373.91,668.56,376c0,.3,0,.64,0,.94-.09,5.48,0,11.16.15,16.66.43,20.24.88,41.17-8,62.25-4.26,10.1-9.89,19.47-15.33,28.52-3.58,6-7,11.59-9.83,17.19C618.37,535.11,597,576.9,595.73,615.86c-.48,15-6.85,44.84-27.51,50.31-7.32,1.94-21.5,2-34.43-19-7.89-12.87-9.36-25.72-10.66-37-1.44-12.56-2.58-20-8.81-26.35l-1,.21a15.61,15.61,0,0,1-1.54.34c-9.39,2.21-21.22,6.65-25.5,13.55-1.46,2.34-3,6.44.19,14.93,4.82,12.74,8,23.52,11,33.94,5.85,20.06,10.9,37.37,26.65,63.46a200.15,200.15,0,0,1,28.74,118.6A325,325,0,0,1,547.45,868.69ZM472.23,846.2l44.18,14.52a298.34,298.34,0,0,0,4.54-34.3,168.35,168.35,0,0,0-24.23-99.73c-17.9-29.65-23.76-49.75-30-71-2.87-9.85-5.84-20-10.21-31.6-7.59-20.1-2.77-34.59,2.61-43.21,8.67-13.89,24.13-21.44,37-25.49L517,482.67A441.92,441.92,0,0,1,537.15,427l18.12-41.22,22-50.08c1.82-4.18,2.82-9.32-3.67-15.23-9.09-8.27-26.31-11.34-35.45-6.31-7.84,4.32-8.89,7-13.29,18.24q-.93,2.39-2,5l-28.46,70.51c-.08.22-.18.43-.28.65a141.55,141.55,0,0,1-8.24,15.19c-3.52,5.57-14.24,22.51-30.42,19-6-1.3-13.91-5.79-17.52-19.77-1.82-7-2.7-16.65-2.7-29.45,0-27.14-.74-55.33-2.22-83.78a369.61,369.61,0,0,1,7.06-93.27l12.63-61.65c.11-2.11.24-11-5.32-16.56-6.54-6.52-19.31-6.69-28.87-5.69-36.13,3.81-38.09,21.6-34.45,71.48.8,11,1.63,22.41,1.57,33.82,0,4-.9,13.84-8.44,20.09a19.61,19.61,0,0,1-16.1,4.17,20.92,20.92,0,0,1-10.12-5c-11.15-9.88-17.89-22.89-23.84-34.37l-1.36-2.62c-4.17-8-8.27-17.66-12.61-27.9-25.43-59.9-43.21-86.08-75.48-72.88-3.34,1.37-32.4,13.81-26.32,30.31,3.89,10.55,13,22.48,21.77,34,4.71,6.18,9.16,12,13.05,17.89l63.63,96.27a15.78,15.78,0,0,1,2,4.28,138.55,138.55,0,0,1,4.15,20.5c.81,6.92,3.3,28-10.88,38.69-10.65,8.06-24.85,6.58-42.21-4.4a250.18,250.18,0,0,0-53.06-24.29c-21.17-6.64-38.07-7.57-45.22-2.51-2.5,1.78-10.13,7.18-5,22.94,4.67,14.35,17.1,25.32,32.45,28.61,21.8,4.69,44.67,10.22,63.61,21.65,40.79,24.63,77.3,74.13,104,110.28.26.35,25.48,35,10.61,55.86-5,7-15.35,14-36.05,7.55-3.66-1.15-7.41-2.37-11.24-3.62-24.11-7.84-51.45-16.73-73.92-12.82-9.93,1.73-20.68,16.43-22.13,30.25-1.26,12.14,5.3,14.76,7.77,15.75,5.88,2.35,35.69,7.72,89,14.41,2.43.3,5.07.58,8.29.89,11,1,39.8,5.75,68.42,27a146.67,146.67,0,0,1,40.75,46.8c12.51,22.36,20.58,49.21,24,79.82a1.11,1.11,0,0,1,0,.17Z"
          fill={color}
        />
      </svg>
    ),
    link_name: 'pickup_coral_ground',
  },
  [ReefscapeActionType.ScoreCoralL1]: {
    name: 'Score Coral L1',
    link_name: 'score_coral_l1',
  },
  [ReefscapeActionType.ScoreCoralL2]: {
    name: 'Score Coral L2',
    link_name: 'score_coral_l2',
  },
  [ReefscapeActionType.ScoreCoralL3]: {
    name: 'Score Coral L3',
    link_name: 'score_coral_l3',
  },
  [ReefscapeActionType.ScoreCoralL4]: {
    name: 'Score Coral L4',
    link_name: 'score_coral_l4',
  },
  [ReefscapeActionType.ScoreProcessor]: {
    name: 'Score Processor',
    link_name: 'score_processor',
  },
  [ReefscapeActionType.MissCoral]: {
    name: 'Miss Coral',
    link_name: 'miss_coral',
  },
};

export const ReefscapeActionIcon = ({
  action,
}: {
  action: ReefscapeActionType;
}) => {
  const {colors} = useTheme();
  const metadata = ReefscapeActions[action];
  return metadata.icon
    ? metadata.icon({
        color: colors.text,
      })
    : null;
};
